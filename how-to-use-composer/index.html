
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How to use Composer - a PHP package manager - ifdattic</title>
  <meta name="author" content="Andrew Marcinkevičius">

  
  <meta name="description" content="Composer is a tool for dependency management in PHP. It allows you to declare the libraries your project depends on and helps to manage those &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ifdattic.com/how-to-use-composer">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="ifdattic" type="application/atom+xml">
  <script src="/js/modernizr-2.8.3-custom.min.js"></script>
  <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./js/libs/jquery-2.1.3.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="https://plus.google.com/111660522645911622239/posts" rel="author">
<script src="//load.sumome.com/" data-sumo-site-id="c164debf0a268ada6ab9186c859e0f9e07ed6d194f1e9f7d9d80d283225e676e" async></script>

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48134144-1', 'ifdattic.com');
    ga('send', 'pageview');

    window.onscroll = function () {
        window.onscroll = null;
        ga('send', 'event', 'ga bounce scroll');
    }

  </script>


</head>

<body >
  <header role="banner">
    <div class="wrapper"><hgroup>
  <h1>
    <a href="/">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="sitelogo" alt="ifdattic" />
    </a>
  </h1>
</hgroup>

<nav class="nav" data-state="closed">
  <a href="#" class="nav-reveal">
    <span></span>
    <span></span>
    <span></span>
  </a>
  <ul>
    <li><a href="/blog">Blog</a></li>
    <li><a href="/">About</a></li>
  </ul>
</nav>


</div>
  </header>
  <div id="main">
    <div id="content" class="wrapper">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">How to use Composer - a PHP package manager</h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-03-29T19:15:26+03:00" pubdate data-updated="true">March 29, 2016</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Composer is a tool for dependency management in PHP. It allows you to declare the libraries your project depends on and helps to manage those dependencies.</p>

<p>Dependencies are managed on a per-project basis, installing them in a directory inside your project. For convenience some dependencies can be installed globally (e.g., Symfony project installer).</p>

<p>Skip to any of the sections:</p>

<ul>
<li><a href="#how-to-install-update#">How to install and update</a>

<ul>
<li><a href="#install-on-osx">Installing on OS X</a></li>
</ul>
</li>
<li><a href="#adding-dependencies">Adding dependencies</a>

<ul>
<li><a href="#adding-specific-version">Adding specific version</a></li>
</ul>
</li>
<li><a href="#removing-dependency">Removing dependency</a></li>
<li><a href="#initializing-composerjson-file">Initializing composer.json file</a></li>
<li><a href="#updating-dependency">Updating the dependency</a></li>
<li><a href="#installing-dependencies">Installing dependencies</a>

<ul>
<li><a href="#installing-dependencies-on-production">Installing dependencies on production servers</a></li>
</ul>
</li>
<li><a href="#autoloading">Autoloading</a>

<ul>
<li><a href="#psr4">PSR-4</a></li>
<li><a href="#psr0">PSR-0</a></li>
<li><a href="#classmap">Classmap</a></li>
<li><a href="#development-autoloading">Development autoloading</a></li>
</ul>
</li>
<li><a href="#creating-project">Creating a project</a></li>
<li><a href="#loading-custom-package">Loading custom package / replacing existing package</a>

<ul>
<li><a href="#adding-repository-cli">Adding / removing repository through CLI</a></li>
</ul>
</li>
<li><a href="#running-composer-globally">Running Composer globally</a></li>
<li><a href="#adding-platform-requirements">Adding platform requirements</a></li>
<li><a href="#speed-up-install">Speed up installation of dependencies</a></li>
</ul>


<p><a name="how-to-install-update"></a></p>

<h2>How to install and update</h2>

<p>Composer can be installed by running:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -sS https://getcomposer.org/installer | sudo php -- --install-dir<span class="o">=</span>/usr/local/bin --filename<span class="o">=</span>composer
</span></code></pre></td></tr></table></div></figure>


<p>This will install Composer in the directory <code>/usr/local/bin</code> (which should be in your path) allowing you to run it from anywhere by using <code>composer</code> command.</p>

<p>If your installation is working correctly you should see the version and available commands:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer
</span></code></pre></td></tr></table></div></figure>


<p>To make sure that you&rsquo;re using the latest version of Composer, constantly run the self update:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer self-update
</span></code></pre></td></tr></table></div></figure>


<p><a name="install-on-osx"></a></p>

<h3>Installing on OS X</h3>

<p>If you use OS X you can install Composer through <a href="http://brew.sh/">Homebrew</a>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>brew install homebrew/php/composer
</span></code></pre></td></tr></table></div></figure>


<p>Check the <a href="https://getcomposer.org/doc/00-intro.md#installation-linux-unix-osx">documentation</a> if any of the installation options doesn&rsquo;t work for you (e.g., install locally or on Windows).</p>

<p><a name="adding-dependencies"></a></p>

<h2>Adding dependencies</h2>

<p>To add a dependency your project needs to use the <code>require</code> command with a package name (format <code>&lt;vendor&gt;/&lt;name&gt;</code>) command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer require monolog/monolog
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer require &lt;vendor&gt;/&lt;name&gt;
</span><span class='line'>
</span><span class='line'><span class="c"># Signature of adding multiple dependencies:</span>
</span><span class='line'>composer require &lt;vendor&gt;/&lt;name&gt; &lt;vendor2&gt;/&lt;name&gt; &lt;vendor2&gt;/&lt;name2&gt;
</span></code></pre></td></tr></table></div></figure>


<p>This creates the <code>composer.json</code> file (if it doesn&rsquo;t exist), and installs the dependency (including dependencies your dependency depends on).</p>

<p><strong>Avoid changing <code>composer.json</code> file manually</strong>, most of the time the <code>require</code> command is enough to manage dependencies.</p>

<p>To add a development dependency use the <code>--dev</code> flag with <code>require</code> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer require --dev phpspec/phpspec
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer require --dev &lt;vendor&gt;/&lt;name&gt;
</span></code></pre></td></tr></table></div></figure>


<p><a name="adding-specific-version"></a></p>

<h3>Adding specific version</h3>

<p>The <code>require</code> command <strong>will automatically choose a suitable version</strong> you can use in your project. If you need to provide the specific version of dependency provide it with the package name:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer require monolog/monolog:~1.17.0
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer require &lt;vendor&gt;/&lt;name&gt;:&lt;version&gt;
</span></code></pre></td></tr></table></div></figure>


<p>Version to use can be defined in the following ways:</p>

<ul>
<li>The <code>^</code> (caret) operator means <em>any non-breaking version / until major</em> (e.g., <code>^1.2.3</code> is equivalent to <code>&gt;=1.2.3 &lt;2.0.0</code>)</li>
<li>The <code>~</code> (tilde) operator means <em>approximate / increment right most digit</em> (e.g., <code>~1.2</code> is equivalent to <code>&gt;=1.2 &lt;2.0.0</code> or <code>~1.2.3</code> is equivalent to <code>&gt;=1.2.3 &lt;1.3.0</code>)</li>
<li>Read the <a href="https://getcomposer.org/doc/articles/versions.md">documentation</a> to learn about other version constraints (exact, range, wildcard)</li>
</ul>


<p>Versions are described using semantic versioning (SemVer) which uses the format <code>MAJOR.MINOR.PATCH</code>. Each of the numbers have a specific meaning:</p>

<ul>
<li><code>MAJOR</code> &ndash; API changes that break backwards-compatibility</li>
<li><code>MINOR</code> &ndash; new features</li>
<li><code>PATCH</code> &ndash; bug fixes</li>
</ul>


<p><a name="removing-dependency"></a></p>

<h2>Removing dependency</h2>

<p>If you don&rsquo;t need the dependency anymore use the <code>remove</code> command to remove it from the <code>composer.json</code> file and directory:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer remove monolog/monolog
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer remove &lt;vendor&gt;/&lt;name&gt;
</span></code></pre></td></tr></table></div></figure>


<p>To remove the development dependency add <code>--dev</code> flag to <code>remove</code> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer remove --dev phpspec/phpspec
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer remove --dev &lt;vendor&gt;/&lt;name&gt;
</span></code></pre></td></tr></table></div></figure>


<p><a name="initializing-composerjson-file"></a></p>

<h2>Initializing composer.json file</h2>

<p>If you are creating a package or want to fill a <code>composer.json</code> file interactively, use the <code>init</code> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer init
</span></code></pre></td></tr></table></div></figure>


<p>This will ask you to provide information like package name, description, dependencies, etc. After you provide all the information it will generate a <code>composer.json</code> file.</p>

<p><a name="updating-dependency"></a></p>

<h2>Updating the dependency</h2>

<p>To get the latest versions of the dependencies (also updates the <code>composer.lock</code> file) use the <code>update</code> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer update
</span></code></pre></td></tr></table></div></figure>


<p>If you want to update only specific packages provide them to the <code>update</code> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer update monolog/monolog
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer update &lt;vendor&gt;/&lt;name&gt;
</span><span class='line'>
</span><span class='line'><span class="c"># Wildcard is allowed to update multiple packages (without listing them):</span>
</span><span class='line'>composer update &lt;vendor&gt;/*
</span></code></pre></td></tr></table></div></figure>


<p><a name="installing-dependencies"></a></p>

<h2>Installing dependencies</h2>

<p>Use the <code>install</code> command to install project dependencies:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer install
</span></code></pre></td></tr></table></div></figure>


<p>This will read the <code>composer.json</code> file and resolve your dependencies. After finishing the installation it will create a <code>composer.lock</code> file, which contains the exact versions installed. This makes sure that the same versions are installed every time the <code>install</code> command is executed.</p>

<p><strong>Commit your application&rsquo;s <code>composer.lock</code> file (along with <code>composer.json</code>) into version control</strong>.</p>

<p>By convention dependencies are installed into a <code>vendor</code> directory, which <strong>should not be committed to version control</strong>.</p>

<p><a name="installing-dependencies-on-production"></a></p>

<h3>Installing dependencies on production servers</h3>

<p>You will want to use a few flags when installing dependencies on production servers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer install --prefer-dist --no-dev --optimize-autoloader --no-interaction
</span></code></pre></td></tr></table></div></figure>


<p>This will optimize the dependency installation which is really useful for production servers. It will try to install distribution packages (<code>--prefer-dist</code> flag), won&rsquo;t install development dependencies (<code>--no-dev</code> flag), and generate a classmap for faster autoloader (<code>--optimize-autoloader</code> flag). The <code>--no-interaction</code> flag will make sure that no interactive questions are asked (needed for automated deployments).</p>

<p><a name="autoloading"></a></p>

<h2>Autoloading</h2>

<p>Composer generates a <code>vendor/autoload.php</code> file which automatically loads the classes your project depends on. Just include that file in your PHP script:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">require</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/vendor/autoload.php&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can change the <code>autoload</code> key in your <code>composer.json</code> file to define the mapping.</p>

<p>If you added new classes you might need to update the autoloader. Use the <code>dump-autoload</code> command to do that:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer dump-autoload
</span><span class='line'>
</span><span class='line'><span class="c"># For production use</span>
</span><span class='line'>composer dump-autoload --optimize --no-dev
</span></code></pre></td></tr></table></div></figure>




<!-- https://getcomposer.org/doc/01-basic-usage.md#autoloading -->


<p><a name="psr4"></a></p>

<h3>PSR-4</h3>

<p>Under the <code>psr-4</code> key you define a mapping from namespaces to paths, relative to the package root. The PSR-4 is the <em>recommended</em> choice for autoloading (avoids having to regenerate the autoloader after adding classes).</p>

<p><strong>Namespace prefixes must end in <code>\\</code> to avoid conflicts between similar prefixes</strong>.</p>

<p>In addition to normal mapping definition, you can define multiple directories, or define a fallback directory:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;autoload&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;psr-4&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="nt">&quot;Vendor\\Namespace\\Normal\\&quot;</span><span class="p">:</span> <span class="s2">&quot;src/&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nt">&quot;Vendor\\Namespace\\Multi\\&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;src/&quot;</span><span class="p">,</span> <span class="s2">&quot;lib/&quot;</span><span class="p">],</span>
</span><span class='line'>            <span class="nt">&quot;&quot;</span><span class="p">:</span> <span class="s2">&quot;src/fallback/&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="psr0"></a></p>

<h3>PSR-0</h3>

<p>Under the <code>psr-0</code> key you define a mapping from namespaces to paths, relative to the package root. This also supports the PEAR-style non-namespaced convention.</p>

<p><strong>Namespace prefixes should end in <code>\\</code> to avoid conflicts between similar prefixes</strong>.</p>

<p>In addition to normal mapping definition, you can define multiple directories, or define a fallback directory:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;autoload&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;psr-0&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="nt">&quot;Vendor\\Namespace\\Normal\\&quot;</span><span class="p">:</span> <span class="s2">&quot;src/&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nt">&quot;Vendor_Namespace_PEAR_&quot;</span><span class="p">:</span> <span class="s2">&quot;src/&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nt">&quot;Vendor\\Namespace\\Multi\\&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;src/&quot;</span><span class="p">,</span> <span class="s2">&quot;lib/&quot;</span><span class="p">],</span>
</span><span class='line'>            <span class="nt">&quot;&quot;</span><span class="p">:</span> <span class="s2">&quot;src/fallback/&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="classmap"></a></p>

<h3>Classmap</h3>

<p>For libraries that do not follow PSR-0/4 you can specify directories or files to search for classes (using the <code>classmap</code> key):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;autoload&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;classmap&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;src/&quot;</span><span class="p">,</span> <span class="s2">&quot;lib/&quot;</span><span class="p">,</span> <span class="s2">&quot;Something.php&quot;</span><span class="p">]</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="development-autoloading"></a></p>

<h3>Development autoloading</h3>

<p>You should avoid polluting the autoloader in production with classes it doesn&rsquo;t need (like test suite). Using the <code>autoload-dev</code> key you can define classes that should be loaded only in development:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;autoload-dev&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;psr-4&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="nt">&quot;MyLibrary\\Tests\\&quot;</span><span class="p">:</span> <span class="s2">&quot;tests/&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="creating-project"></a></p>

<h2>Creating a project</h2>

<p>The <code>create-project</code> command will create a new project from an existing package. It&rsquo;s the equivalent of doing a git clone followed by installation of dependencies. The command takes the package name and the directory to create it in (optional: provide the version as third parameter):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer create-project symfony/framework-standard-edition my_project_name
</span><span class='line'><span class="c"># or</span>
</span><span class='line'>composer create-project symfony/framework-standard-edition my_project_name 3.1.*
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer create-project &lt;vendor&gt;/&lt;name&gt; &lt;path&gt; &lt;optional:version&gt;
</span></code></pre></td></tr></table></div></figure>


<p><a name="loading-custom-package"></a></p>

<h2>Loading custom package / replacing existing package</h2>

<p>In some cases you might want to use a custom package. For example you fixed a bug in open source library and while waiting for PR to be merged you want to use the fixed library.</p>

<p>The branch on the forked repository should be prefixed with <code>dev-</code> (e.g., in the repository it will be <code>bugfix</code>, in the <code>composer.json</code> file it will be <code>dev-bugfix</code>). Then change the <code>repositories</code> key in <code>composer.json</code> (in example assume that I forked <code>Monolog</code> and created <code>bugfix</code> branch):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;repositories&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="s2">&quot;type&quot;</span><span class="err">:</span> <span class="s2">&quot;vcs&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;url&quot;</span><span class="err">:</span> <span class="s2">&quot;https://github.com/ifdattic/monolog&quot;</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'>    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;monolog/monolog&quot;</span><span class="p">:</span> <span class="s2">&quot;dev-bugfix&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now after updating the dependency it should replace the original package with a changed one (don&rsquo;t change the package name for override to work):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer update monolog/monolog
</span><span class='line'>
</span><span class='line'><span class="c"># Signature</span>
</span><span class='line'>composer update
</span><span class='line'><span class="c"># or</span>
</span><span class='line'>composer update &lt;vendor&gt;/&lt;name&gt;
</span></code></pre></td></tr></table></div></figure>


<p>To avoid conflicts you might need to alias the branch for it to be treated as a specific version. To make in-line aliases use the <code>as</code> keyword:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;monolog/monolog&quot;</span><span class="p">:</span> <span class="s2">&quot;dev-bugfix as 1.18.1&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<!-- https://getcomposer.org/doc/articles/aliases.md -->


<p><a name="adding-repository-cli"></a></p>

<h3>Adding / removing repository through CLI</h3>

<p>If you don&rsquo;t want to manually add repository use the <code>composer config repositories</code> command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer config repositories.monolog vcs https://github.com/ifdattic/monolog
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer config repositories.&lt;name&gt; &lt;<span class="nb">type</span>&gt; &lt;url&gt;
</span></code></pre></td></tr></table></div></figure>


<p>To remove a repository use <code>--unset</code> flag (<code>repo</code> is alias for <code>repositories</code>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer config --unset repo.monolog
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer config --unset repo.&lt;name&gt;
</span></code></pre></td></tr></table></div></figure>




<!-- https://getcomposer.org/doc/05-repositories.md#loading-a-package-from-a-vcs-repository -->


<p><a name="running-composer-globally"></a></p>

<h2>Running Composer globally</h2>

<p>Sometimes you might want to install some CLI tools globally. Using <code>global</code> command it will allow to install them to the directory defined in <code>COMPOSER_HOME</code> environment variable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer global require fabpot/php-cs-fixer
</span><span class='line'>
</span><span class='line'><span class="c"># Signature:</span>
</span><span class='line'>composer global &lt;<span class="nb">command</span>&gt; &lt;vendor&gt;/&lt;name&gt;
</span></code></pre></td></tr></table></div></figure>




<!-- https://getcomposer.org/doc/03-cli.md#global  -->


<p><a name="adding-platform-requirements"></a></p>

<h2>Adding platform requirements</h2>

<p>If you need to add requirements for the system you can use platform packages. They are virtual packages of the things that are installed on the system. For example the following snippet requires for PHP 7 to be available:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;^7.0&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The following platform packages are available: <code>php</code>, <code>hhvm</code>, <code>ext-&lt;name&gt;</code>, <code>lib-&lt;name&gt;</code>.</p>

<p>To get a list of locally available platform packages run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer show --platform
</span></code></pre></td></tr></table></div></figure>




<!-- https://getcomposer.org/doc/02-libraries.md#platform-packages -->


<p><a name="speed-up-install"></a></p>

<h2>Speed up installation of dependencies</h2>

<p>If your project has a lot of dependencies, it can take a long time for them to install. You can speed up the installation by installing dependencies in parallel.</p>

<p>To achieve this install <a href="https://github.com/hirak/prestissimo">prestissimo composer plugin</a>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>composer global require hirak/prestissimo
</span></code></pre></td></tr></table></div></figure>


<p>It might not make a difference if you&rsquo;re updating a single dependency for your project (it might still use only a single connection). It does improve the speed when installing a lot of dependencies (like when starting a new project or deploying to production).</p>

<h2>Conclusion</h2>

<p>You can do a lot more with Composer, but this should take care of most of the use cases while developing.</p>
</div>


  <footer>
    <ul class="social-buttons">
  <li>
    <a class="socialite twitter-share"
      href="https://twitter.com/share"
      data-via="ifdattic"
      data-count="vertical"
      rel="nofollow"
      target="_blank">
      Share on Twitter
    </a>
  </li>
  <li>
    <a class="socialite twitter-follow"
      href="https://twitter.com/ifdattic"
      data-count="vertical"
      target="_blank">
      Follow me
    </a>
  </li>
  <li>
    <a class="socialite googleplus-one"
    href="https://plus.google.com/share"
    data-size="tall"
    rel="nofollow"
    target="_blank">
      Share on Google+
    </a>
  </li>
  <li>
    <a class="socialite facebook-like"
      href="https://www.facebook.com/sharer.php"
      data-layout="box_count"
      data-width="60"
      data-show-faces="false"
      rel="nofollow"
      target="_blank">
      Share on Facebook
    </a>
  </li>
  <li>
    <a class="socialite linkedin-share"
      href="https://www.linkedin.com/shareArticle"
      data-counter="top"
      rel="nofollow"
      target="_blank">
      Share on LinkedIn
    </a>
  </li>
</ul>

    <p class="meta">
      <a href="https://github.com/ifdattic/ifdattic.github.io/blob/source/source/_posts/2016-03-29-how-to-use-composer-a-php-package-manager.markdown">Edit this page on GitHub</a><br />
      
  

<span class="byline author vcard">Posted by <span class="fn">Andrew Marcinkevičius</span></span>

      








  


<time datetime="2016-03-29T19:15:26+03:00" pubdate data-updated="true">March 29, 2016</time>
      

<span class="categories">
  
    <a class='category' href='/categories/80-slash-20/'>80/20</a>, <a class='category' href='/categories/composer/'>Composer</a>, <a class='category' href='/categories/php/'>PHP</a>, <a class='category' href='/categories/technical/'>Technical</a>
  
</span>


    </p>
    <p class="meta">
      
        <a class="basic-alignment left" href="/spain-barcelona-first-impressions" title="Previous Post: Spain - Barcelona First Impressions (part 2) - Testing the World and Looking for Home series">&laquo; Spain - Barcelona First Impressions (part 2) - Testing the World and Looking for Home series</a>
      
      
        <a class="basic-alignment right" href="/making-video-course-reflection" title="Next Post: Making a Video Course - Behind the Scenes">Making a Video Course - Behind the Scenes &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

    </div>
  </div>
  <footer role="contentinfo"><div class="wrapper"><p>&copy; 2016 - Andrew Marcinkevičius</p>
<p>
  Hosted on <a href="https://github.com/ifdattic/ifdattic.github.io">Github</a>
  -
  Powered by <a href="http://octopress.org">Octopress</a>
</p>

</div></footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ifdattic';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://ifdattic.com/how-to-use-composer';
        var disqus_url = 'http://ifdattic.com/how-to-use-composer';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<script src="/javascripts/socialite.min.js"></script>
<script src="/javascripts/scripts.js" type="text/javascript"></script>


</body>
</html>
